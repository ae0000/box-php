name: php
version: 0.1.0
inherits: wercker/ubuntu12.04-webessentials@0.0.3
type : main
platform : ubuntu@12.04
description : php
keywords:
  - php
packages :
  - php@5.4
script : |
  sudo apt-get update
  sudo chef-solo -c $WERCKER_SOURCE_DIR/solo.rb -j $WERCKER_SOURCE_DIR/solo.json -l debug
  sudo add-apt-repository ppa:ondrej/php5 -y
  sudo apt-get update
  sudo apt-get upgrade
  sudo apt-get dist-upgrade
  sudo apt-get install php5-sqlite -y
  sudo apt-get install php5-mysql -y
  sudo apt-get install php5-curl -y
  sudo apt-get install php5-imagick -y
  sudo apt-get install php5-json -y
  sudo apt-get install php5-memcache -y
  sudo apt-get install php5-memcached -y
  sudo apt-get install php5-odbc -y
  sudo apt-get install php5-pgsql -y
  sudo apt-get install php5-xdebug -y
  
  cd 
  curl -sS https://getcomposer.org/installer | php
  sudo mv composer.phar /usr/local/bin/composer
  mkdir -p .composer
  
  sudo pear channel-discover "pear.phpunit.de"
  sudo pear install "phpunit/PHPUnit"
    
  cd
  wget http://xdebug.org/files/xdebug-2.2.3.tgz
  tar xfz xdebug-2.2.3.tgz
  cd xdebug-2.2.3
  phpize
  ./configure --enable-xdebug
  make
  sudo chown -R ubuntu $HOME

box-detect:
  priority : 1200
  version : 
  detect:
    - files:
      - composer.json
      

